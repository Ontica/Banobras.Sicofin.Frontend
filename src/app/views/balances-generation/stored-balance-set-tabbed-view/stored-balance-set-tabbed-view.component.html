<emp-ng-card [title]="title" [hint]="hint" (cardClose)="onClose()">

  <mat-tab-group [(selectedIndex)]="selectedTabIndex">

    <mat-tab label="Saldos">

      <div fxLayout="column" fxFlexFill>

        <form #filterForm="ngForm" fxFlex="none"
          [style.padding]="0" [style.margin]="0" [style.paddingBottom.px]="8"
          autocomplete="off" class="form-section form-container"
          (keydown.enter)="$event.preventDefault()">

          <div fxLayout="column" fxLayoutGap="0.5rem" fxLayoutGap.lt-md="0">

            <div fxLayout="row">

              <div fxFlex="50">

                <label>Consultar por:</label>

                <emp-ng-select
                  [(ngModel)]="queryBy" name="queryBy" required
                  [config]="{bindByValue: false}"
                  [bindLabel]="null"
                  [items]="queryByList">
                </emp-ng-select>

              </div>

              <div fxFlex fxLayoutAlign="start end">

                <div class="input-icon-container" [style.width.%]="100" [style.marginBottom.px]="4">

                  <input type="text" class="text-box" name="keywords" placeholder="Buscar..."
                    [(ngModel)]="keywords"
                    (keyup.escape)="keywords = null"
                    required>

                </div>

              </div>

              <div fxFlex="36px" fxLayoutAlign="space-around end" [style.paddingBottom.px]="2">

                <button title="Buscar"
                  [class.btn-icon-action]="filterForm.valid"
                  [class.btn-icon]="filterForm.invalid"
                  [disabled]="filterForm.invalid"
                  [style.margin]="0">
                  <mat-icon>search</mat-icon>

                </button>

              </div>

            </div>

          </div>

        </form>

        <div #tableContainer fxFlex>

          <cdk-virtual-scroll-viewport tvsItemSize="25" headerHeight="40" [bufferMultiplier]="0">

            <table mat-table [dataSource]="storedBalanceListDS">

              <ng-container matColumnDef="accountNumber">
                <th mat-header-cell *matHeaderCellDef> Cuenta </th>
                <td mat-cell *matCellDef="let row" class="nowrap">{{ row.accountNumber }}</td>
              </ng-container>

              <ng-container matColumnDef="sectorCode">
                <th mat-header-cell *matHeaderCellDef> Sector </th>
                <td mat-cell *matCellDef="let row" [style.width.px]="50">{{ row.sectorCode }}</td>
              </ng-container>
              <ng-container matColumnDef="accountName">
                <th mat-header-cell *matHeaderCellDef> Nombre de la cuenta </th>
                <td mat-cell *matCellDef="let row">{{ row.accountName }}</td>
              </ng-container>
              <ng-container matColumnDef="partial">
                <th mat-header-cell *matHeaderCellDef class="text-align-right"> Parcial </th>
                <td mat-cell *matCellDef="let row" class="text-align-right">
                  {{ row.partial | number : '1.2-2' }}
                </td>
              </ng-container>

              <ng-container matColumnDef="balance">
                <th mat-header-cell *matHeaderCellDef class="text-align-right"> Saldo </th>
                <td mat-cell *matCellDef="let row" class="text-align-right">
                  {{ row.balance | number : '1.2-2' }}
                </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="storedBalanceDisplayedColumns; sticky: true;"></tr>
              <tr mat-row *matRowDef="let row; columns: storedBalanceDisplayedColumns;"></tr>
            </table>

            <div *ngIf="storedBalanceListDS.data.length == 0" class="text-not-found">
              <p>A este grupo no se le han generado saldos.</p>
            </div>

          </cdk-virtual-scroll-viewport>

        </div>

      </div>

    </mat-tab>

    <mat-tab label="Recalcular" disabled>

    </mat-tab>

  </mat-tab-group>

</emp-ng-card>
