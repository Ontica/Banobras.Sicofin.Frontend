
<div [style.height.%]="100" [empNgSpinnerHost]="spinner">

  <emp-ng-spinner #spinner [visible]="isLoadingContexts || isLoading">

  </emp-ng-spinner>

  <mat-tab-group>

    <mat-tab label="Usuario">

      <div fxLayout="column" fxFlexFill fxLayoutGap="0.75rem" fxLayoutGap.lt-md="0.75rem">

        <emp-ng-subject-editor fxFlex="none"
          [subject]="subject"
          [canEdit]="canEdit"
          [canGeneratePassword]="!isSuspended && hasContexts"
          [isSuspended]="isSuspended"
          (subjectEditorEvent)="onSubjectEditorEvent($event)">

        </emp-ng-subject-editor>

        <div fxFlex="none">

          <div class="section-title"> Aplicaciones </div>

          <emp-ng-security-item-edition
            [itemsAssignedList]="subjectContextsList"
            [canEdit]="!isSuspended && canEdit"
            [itemsToAssignList]="contextsList"
            [submitted]="submitted"
            itemTypeName="AplicaciÃ³n"
            (securityItemEditionEvent)="onSubjectContextsEditionEvent($event)">

          </emp-ng-security-item-edition>

        </div>

      </div>

    </mat-tab>

    <mat-tab label="Roles">

      <emp-ng-security-item-edition
        [itemsAssignedList]="subjectRolesList"
        [canEdit]="!isSuspended && canEdit"
        [itemsForSelectorList]="subjectContextsList"
        [selectorRequired]="true"
        [queryExcecuted]="isSubjectRolesExcecuted"
        [itemsToAssignList]="rolesList"
        [submitted]="submitted"
        itemTypeName="Rol"
        (securityItemEditionEvent)="onSubjectRolesEditionEvent($event)">

      </emp-ng-security-item-edition>

    </mat-tab>

    <mat-tab label="Permisos">

      <emp-ng-security-item-edition
        [itemsAssignedList]="subjectFeaturesList"
        [canEdit]="!isSuspended && canEdit"
        [itemsForSelectorList]="subjectContextsList"
        [selectorRequired]="true"
        [queryExcecuted]="isSubjectFeaturesExcecuted"
        [itemsToAssignList]="featuresList"
        [submitted]="submitted"
        itemTypeName="Permiso"
        (securityItemEditionEvent)="onSubjectFeaturesEditionEvent($event)">

      </emp-ng-security-item-edition>

    </mat-tab>

  </mat-tab-group>

</div>
