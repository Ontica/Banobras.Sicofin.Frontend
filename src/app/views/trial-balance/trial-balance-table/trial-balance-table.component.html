<div fxLayout="column" fxFlexFill>

  <div #controlsContainer *ngIf="displayTrialBalanceTable" fxFlex="none">

    <mat-divider [style.marginBottom.px]="8">

    </mat-divider>

    <emp-fa-trial-balance-controls
      [filter]="filter"
      [indexSelected]="indexSelected"
      (trialBalanceControlsEvent)="onTrialBalanceControlsEvent($event)">

    </emp-fa-trial-balance-controls>

  </div>

  <div #tableContainer fxFlex>

    <cdk-virtual-scroll-viewport tvsItemSize="25" headerHeight="40" [bufferMultiplier]="0">

      <table mat-table [dataSource]="dataSource">

        <ng-container *ngFor="let column of columns; let i = index" matColumnDef="{{column.field}}">

          <th mat-header-cell *matHeaderCellDef class="nowrap"
            [ngClass]="{'text-align-right': column.type === 'decimal'}">
            {{column.title}}
          </th>

          <td mat-cell *matCellDef="let row;"
            [ngClass]="{'text-align-right': column.type === 'decimal',
                        'nowrap': column.type === 'text-nowrap'}">

            <ng-container [ngSwitch]="column.type">
              <span *ngSwitchCase="'decimal'">{{ row[column.field] | number : '1.2-2' }}</span>
              <span *ngSwitchDefault>{{ row[column.field] }}</span>
            </ng-container>

          </td>

        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true;"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

      </table>

      <div *ngIf="!displayTrialBalanceTable" class="text-not-found">
        No se ha invocado la b√∫squeda de cuentas.
      </div>

      <div *ngIf="displayTrialBalanceTable && trialBalance.entries.length === 0" class="text-not-found">
        No se encontraron cuentas con el filtro proporcionado.
      </div>

    </cdk-virtual-scroll-viewport>

  </div>

</div>
